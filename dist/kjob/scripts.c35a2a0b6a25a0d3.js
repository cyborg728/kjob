(function(){var P={},u="";try{u=location.hash.toString()}catch{}var g=D(u),M=j("initParams");if(M)for(var s in M)typeof g[s]>"u"&&(g[s]=M[s]);R("initParams",g);var T,k=!1;try{if(k=null!=window.parent&&window!=window.parent){window.addEventListener("message",function(n){if(n.source===window.parent){try{var a=JSON.parse(n.data)}catch{return}!a||!a.eventType||("set_custom_style"==a.eventType?T.innerHTML=a.eventData:E(a.eventType,a.eventData))}}),T=document.createElement("style"),document.head.appendChild(T);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready"}),"*")}catch{}}}catch{}function v(n){try{return n=n.replace(/\+/g,"%20"),decodeURIComponent(n)}catch{return n}}function D(n){var a={};if(!(n=n.replace(/^#/,"")).length)return a;if(n.indexOf("=")<0&&n.indexOf("?")<0)return a._path=v(n),a;var p=n.indexOf("?");if(p>=0){var c=n.substr(0,p);a._path=v(c),n=n.substr(p+1)}var m=h(n);for(var _ in m)a[_]=m[_];return a}function h(n){var a={};if(!n.length)return a;var c,m,_,L,p=n.split("&");for(c=0;c<p.length;c++)_=v((m=p[c].split("="))[0]),L=null==m[1]?null:v(m[1]),a[_]=L;return a}function E(n,a){J(n,function(p){p(n,a)})}function J(n,a){var p=P[n];if(void 0!==p&&p.length)for(var c=0;c<p.length;c++)try{a(p[c])}catch{}}function R(n,a){try{return window.sessionStorage.setItem("__telegram__"+n,JSON.stringify(a)),!0}catch{}return!1}function j(n){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+n))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:g,isIframe:k,onEvent:function O(n,a){void 0===P[n]&&(P[n]=[]),-1===P[n].indexOf(a)&&P[n].push(a)},offEvent:function G(n,a){if(void 0!==P[n]){var p=P[n].indexOf(a);-1!==p&&P[n].splice(p,1)}},postEvent:function Q(n,a,p){if(a||(a=function(){}),void 0===p&&(p=""),void 0!==window.TelegramWebviewProxy)TelegramWebviewProxy.postEvent(n,JSON.stringify(p)),a();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:n,eventData:p})),a();else if(k)try{window.parent.postMessage(JSON.stringify({eventType:n,eventData:p}),"*"),g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent via postMessage",n,p),a()}catch(m){a(m)}else g.tgWebAppDebug&&console.log("[Telegram.WebView] postEvent",n,p),a({notAvailable:!0})},receiveEvent:E,callEventCallbacks:J},window.Telegram.Utils={urlSafeDecode:v,urlParseQueryString:h,urlParseHashParams:D,urlAppendHashParams:function U(n,a){var p=n.indexOf("#");if(p<0)return n+"#"+a;var c=n.substr(p+1);return c.indexOf("=")>=0||c.indexOf("?")>=0?n+"&"+a:c.length>0?n+"?"+a:n+a},sessionStorageSet:R,sessionStorageGet:j},window.TelegramGameProxy_receiveEvent=E,window.TelegramGameProxy={receiveEvent:E}})(),function(){var P=window.Telegram.Utils,u=window.Telegram.WebView,g=u.initParams,M=u.isIframe,s={},k="",T={},v={},D="light",h="6.0",U="unknown";if(g.tgWebAppData&&g.tgWebAppData.length)for(var Q in T=P.urlParseQueryString(k=g.tgWebAppData)){var E=T[Q];try{("{"==E.substr(0,1)&&"}"==E.substr(-1)||"["==E.substr(0,1)&&"]"==E.substr(-1))&&(T[Q]=JSON.parse(E))}catch{}}if(g.tgWebAppThemeParams&&g.tgWebAppThemeParams.length){var J=g.tgWebAppThemeParams;try{var O;(O=JSON.parse(J))&&L(O)}catch{}}(O=P.sessionStorageGet("themeParams"))&&L(O),g.tgWebAppVersion&&(h=g.tgWebAppVersion),g.tgWebAppPlatform&&(U=g.tgWebAppPlatform);var K=window.innerHeight;function j(e){K!=window.innerHeight&&(K=window.innerHeight,p("viewportChanged",{isStateStable:!0}))}function a(e){return e.toString().replace(/^\s+|\s+$/g,"")}function p(e){var t=Array.prototype.slice.call(arguments);e=t.shift(),u.callEventCallbacks("webview:"+e,function(r){r.apply(s,t)})}function c(e,t){u.onEvent("webview:"+e,t)}function m(e,t){u.offEvent("webview:"+e,t)}function _(e,t){var r=document.documentElement;r&&r.style&&r.style.setProperty&&r.style.setProperty("--tg-"+e,t)}function L(e){var t;for(var r in"#1c1c1d"==e.bg_color&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e"),e)(t=F(e[r]))&&(v[r]=t,"bg_color"==r&&_("color-scheme",D=ce(t)?"dark":"light"),_(r="theme-"+r.split("_").join("-"),t));P.sessionStorageSet("themeParams",v)}var q=!1,V=!1,te=!0;function X(e){var r;typeof e<"u"&&(te=!!e.is_expanded,q=e.height,e.is_state_stable&&(V=e.height),p("viewportChanged",{isStateStable:!!e.is_state_stable})),r=!1!==V?V-A+"px":A?"calc(100vh - "+A+"px)":"100vh",_("viewport-height",!1!==q?q-A+"px":A?"calc(100vh - "+A+"px)":"100vh"),_("viewport-stable-height",r)}var Z=!1,re="bg_color",z="bg_color";function ne(){return"secondary_bg_color"==z?v.secondary_bg_color:"bg_color"==z?v.bg_color:z}var oe=null;function Y(){var e=ne();oe!=e&&(oe=e,u.postEvent("web_app_set_background_color",!1,{color:e}))}function F(e){var t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e+=""))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){var r=parseInt(t[1]),o=parseInt(t[2]),f=parseInt(t[3]);return"#"+(r=(r<16?"0":"")+r.toString(16))+(o=(o<16?"0":"")+o.toString(16))+(f<16?"0":"")+f.toString(16)}return!1}function ce(e){3==(e=e.replace(/[\s#]/g,"")).length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16);return Math.sqrt(t*t*.299+r*r*.587+o*o*.114)<120}function w(e){return function de(e,t){"string"!=typeof e&&(e=""),"string"!=typeof t&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");var o,f,W,r=Math.max(e.length,t.length);for(o=0;o<r;o++)if((f=parseInt(e[o])||0)!=(W=parseInt(t[o])||0))return f>W?1:-1;return 0}(h,e)>=0}var ge=function(){var e=!1,t={};Object.defineProperty(t,"isVisible",{set:function(b){d({is_visible:b})},get:function(){return e},enumerable:!0});var r=null;function f(){return{is_visible:e}}function l(){return!!w("6.1")||(console.warn("[Telegram.WebApp] BackButton is not supported in version "+h),!1)}function d(b){return l()&&(typeof b.is_visible<"u"&&(e=!!b.is_visible),function S(){var b=f(),x=function W(b){return typeof b>"u"&&(b=f()),JSON.stringify(b)}(b);r!==x&&(r=x,u.postEvent("web_app_setup_back_button",!1,b))}()),t}return u.onEvent("back_button_pressed",function o(){p("backButtonClicked")}),t.onClick=function(b){return l()&&c("backButtonClicked",b),t},t.offClick=function(b){return l()&&m("backButtonClicked",b),t},t.show=function(){return d({is_visible:!0})},t.hide=function(){return d({is_visible:!1})},t}(),A=0,ve=function(){var e=!1,t=!0,r=!1,o="CONTINUE",f=!1,W=!1,l={};Object.defineProperty(l,"text",{set:function(i){l.setParams({text:i})},get:function(){return o},enumerable:!0}),Object.defineProperty(l,"color",{set:function(i){l.setParams({color:i})},get:function(){return f||v.button_color||"#2481cc"},enumerable:!0}),Object.defineProperty(l,"textColor",{set:function(i){l.setParams({text_color:i})},get:function(){return W||v.button_text_color||"#ffffff"},enumerable:!0}),Object.defineProperty(l,"isVisible",{set:function(i){l.setParams({is_visible:i})},get:function(){return e},enumerable:!0}),Object.defineProperty(l,"isProgressVisible",{get:function(){return r},enumerable:!0}),Object.defineProperty(l,"isActive",{set:function(i){l.setParams({is_active:i})},get:function(){return t},enumerable:!0});var S=null;u.onEvent("main_button_pressed",y);var d=null,b={};if(g.tgWebAppDebug){for(var x in d=document.createElement("tg-main-button"),b={font:"600 14px/18px sans-serif",display:"none",width:"100%",height:"48px",borderRadius:"0",background:"no-repeat right center",position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"15px 20px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"})d.style[x]=b[x];document.addEventListener("DOMContentLoaded",function i(C){document.removeEventListener("DOMContentLoaded",i),document.body.appendChild(d),d.addEventListener("click",y,!1)})}function y(){t&&p("mainButtonClicked")}function I(){return e?{is_visible:!0,is_active:t,is_progress_visible:r,text:o,color:l.color,text_color:l.textColor}:{is_visible:!1}}function ee(){var i=I(),C=function Ee(i){return typeof i>"u"&&(i=I()),JSON.stringify(i)}(i);S!==C&&(S=C,u.postEvent("web_app_setup_main_button",!1,i),g.tgWebAppDebug&&function We(i){i.is_visible?(d.style.display="block",A=48,d.style.opacity=i.is_active?"1":"0.8",d.style.cursor=i.is_active?"pointer":"auto",d.disabled=!i.is_active,d.innerText=i.text,d.style.backgroundImage=i.is_progress_visible?"url('data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewport%3D%220%200%2048%2048%22%20width%3D%2248px%22%20height%3D%2248px%22%3E%3Ccircle%20cx%3D%2250%25%22%20cy%3D%2250%25%22%20stroke%3D%22%23fff%22%20stroke-width%3D%222.25%22%20stroke-linecap%3D%22round%22%20fill%3D%22none%22%20stroke-dashoffset%3D%22106%22%20r%3D%229%22%20stroke-dasharray%3D%2256.52%22%20rotate%3D%22-90%22%3E%3Canimate%20attributeName%3D%22stroke-dashoffset%22%20attributeType%3D%22XML%22%20dur%3D%22360s%22%20from%3D%220%22%20to%3D%2212500%22%20repeatCount%3D%22indefinite%22%3E%3C%2Fanimate%3E%3CanimateTransform%20attributeName%3D%22transform%22%20attributeType%3D%22XML%22%20type%3D%22rotate%22%20dur%3D%221s%22%20from%3D%22-90%2024%2024%22%20to%3D%22630%2024%2024%22%20repeatCount%3D%22indefinite%22%3E%3C%2FanimateTransform%3E%3C%2Fcircle%3E%3C%2Fsvg%3E')":"none",d.style.backgroundColor=i.color,d.style.color=i.text_color):(d.style.display="none",A=0),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=A+"px"),X()}(i))}return l.setText=function(i){return l.setParams({text:i})},l.onClick=function(i){return c("mainButtonClicked",i),l},l.offClick=function(i){return m("mainButtonClicked",i),l},l.show=function(){return l.setParams({is_visible:!0})},l.hide=function(){return l.setParams({is_visible:!1})},l.enable=function(){return l.setParams({is_active:!0})},l.disable=function(){return l.setParams({is_active:!1})},l.showProgress=function(i){return t=!!i,r=!0,ee(),l},l.hideProgress=function(){return l.isActive||(t=!0),r=!1,ee(),l},l.setParams=function xe(i){if(typeof i.text<"u"){var C=a(i.text);if(!C.length)throw console.error("[Telegram.WebApp] Main button text is required",i.text),Error("WebAppMainButtonParamInvalid");if(C.length>64)throw console.error("[Telegram.WebApp] Main button text is too long",C),Error("WebAppMainButtonParamInvalid");o=C}if(typeof i.color<"u")if(!1===i.color||null===i.color)f=!1;else{var ie=F(i.color);if(!ie)throw console.error("[Telegram.WebApp] Main button color format is invalid",i.color),Error("WebAppMainButtonParamInvalid");f=ie}if(typeof i.text_color<"u")if(!1===i.text_color||null===i.text_color)W=!1;else{var ae=F(i.text_color);if(!ae)throw console.error("[Telegram.WebApp] Main button text color format is invalid",i.text_color),Error("WebAppMainButtonParamInvalid");W=ae}if(typeof i.is_visible<"u"){if(i.is_visible&&!l.text.length)throw console.error("[Telegram.WebApp] Main button text is required"),Error("WebAppMainButtonParamInvalid");e=!!i.is_visible}return typeof i.is_active<"u"&&(t=!!i.is_active),ee(),l},l}();u.onEvent("settings_button_pressed",function me(){p("settingsButtonClicked")});var he=function(){var e={};function t(r){if(!w("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+h),e;if("impact"==r.type){if("light"!=r.impact_style&&"medium"!=r.impact_style&&"heavy"!=r.impact_style&&"rigid"!=r.impact_style&&"soft"!=r.impact_style)throw console.error("[Telegram.WebApp] Haptic impact style is invalid",r.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if("notification"==r.type){if("error"!=r.notification_type&&"success"!=r.notification_type&&"warning"!=r.notification_type)throw console.error("[Telegram.WebApp] Haptic notification type is invalid",r.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if("selection_change"!=r.type)throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",r.type),Error("WebAppHapticFeedbackTypeInvalid");return u.postEvent("web_app_trigger_haptic_feedback",!1,r),e}return e.impactOccurred=function(r){return t({type:"impact",impact_style:r})},e.notificationOccurred=function(r){return t({type:"notification",notification_type:r})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),H={},N=!1,B=!1,$={};window.Telegram||(window.Telegram={}),Object.defineProperty(s,"initData",{get:function(){return k},enumerable:!0}),Object.defineProperty(s,"initDataUnsafe",{get:function(){return T},enumerable:!0}),Object.defineProperty(s,"version",{get:function(){return h},enumerable:!0}),Object.defineProperty(s,"platform",{get:function(){return U},enumerable:!0}),Object.defineProperty(s,"colorScheme",{get:function(){return D},enumerable:!0}),Object.defineProperty(s,"themeParams",{get:function(){return v},enumerable:!0}),Object.defineProperty(s,"isExpanded",{get:function(){return te},enumerable:!0}),Object.defineProperty(s,"viewportHeight",{get:function(){return(!1===q?window.innerHeight:q)-A},enumerable:!0}),Object.defineProperty(s,"viewportStableHeight",{get:function(){return(!1===V?window.innerHeight:V)-A},enumerable:!0}),Object.defineProperty(s,"isClosingConfirmationEnabled",{set:function(e){!function le(e){w("6.2")?u.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:Z=!!e}):console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+h)}(e)},get:function(){return Z},enumerable:!0}),Object.defineProperty(s,"headerColor",{set:function(e){!function ue(e){if(w("6.1")){var t;if("bg_color"==e||"secondary_bg_color"==e?t=e:(t=F(e),t=v.bg_color&&v.bg_color==t?"bg_color":!(!v.secondary_bg_color||v.secondary_bg_color!=t)&&"secondary_bg_color"),"bg_color"!=t&&"secondary_bg_color"!=t)throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");re=t,u.postEvent("web_app_set_header_color",!1,{color_key:t})}else console.warn("[Telegram.WebApp] Header color is not supported in version "+h)}(e)},get:function(){return function pe(){return v[re]||null}()},enumerable:!0}),Object.defineProperty(s,"backgroundColor",{set:function(e){!function fe(e){if(w("6.1")){var t;if("bg_color"==e||"secondary_bg_color"==e)t=e;else if(!(t=F(e)))throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");z=t,Y()}else console.warn("[Telegram.WebApp] Background color is not supported in version "+h)}(e)},get:function(){return ne()},enumerable:!0}),Object.defineProperty(s,"BackButton",{value:ge,enumerable:!0}),Object.defineProperty(s,"MainButton",{value:ve,enumerable:!0}),Object.defineProperty(s,"HapticFeedback",{value:he,enumerable:!0}),s.setHeaderColor=function(e){s.headerColor=e},s.setBackgroundColor=function(e){s.backgroundColor=e},s.enableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!0},s.disableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!1},s.isVersionAtLeast=function(e){return w(e)},s.onEvent=function(e,t){c(e,t)},s.offEvent=function(e,t){m(e,t)},s.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(function be(e){if(window.Blob)try{return new Blob([e]).size}catch{}for(var t=e.length,r=e.length-1;r>=0;r--){var o=e.charCodeAt(r);o>127&&o<=2047?t++:o>2047&&o<=65535&&(t+=2),o>=56320&&o<=57343&&r--}return t}(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");u.postEvent("web_app_data_send",!1,{data:e})},s.openLink=function(o,t){var r=document.createElement("A");if(r.href=o,"http:"!=r.protocol&&"https:"!=r.protocol)throw console.error("[Telegram.WebApp] Url protocol is not supported",o),Error("WebAppTgUrlInvalid");o=r.href,t=t||{},w("6.1")?u.postEvent("web_app_open_link",!1,{url:o,try_instant_view:w("6.4")&&!!t.try_instant_view}):window.open(o,"_blank")},s.openTelegramLink=function(e){var t=document.createElement("A");if(t.href=e,"http:"!=t.protocol&&"https:"!=t.protocol)throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if("t.me"!=t.hostname)throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");var r=t.pathname+t.search;M||w("6.1")?u.postEvent("web_app_open_tg_link",!1,{path_full:r}):location.href="https://t.me"+r},s.openInvoice=function(e,t){var o,f,r=document.createElement("A");if(r.href=e,"http:"!=r.protocol&&"https:"!=r.protocol||"t.me"!=r.hostname||!(o=r.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(f=o[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!w("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+h),Error("WebAppMethodUnsupported");if(H[f])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");H[f]={url:e,callback:t},u.postEvent("web_app_open_invoice",!1,{slug:f})},s.showPopup=function(e,t){if(!w("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(N)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var r="",o="",f=[],l={};if(typeof e.title<"u"){if((r=a(e.title)).length>64)throw console.error("[Telegram.WebApp] Popup title is too long",r),Error("WebAppPopupParamInvalid");r.length>0&&(l.title=r)}if(typeof e.message<"u"&&(o=a(e.message)),!o.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(o.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",o),Error("WebAppPopupParamInvalid");if(l.message=o,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(var S=0;S<e.buttons.length;S++){var d=e.buttons[S],b={},x="";if(typeof d.id<"u"&&(x=d.id.toString()).length>64)throw console.error("[Telegram.WebApp] Popup button id is too long",x),Error("WebAppPopupParamInvalid");b.id=x;var y=d.type;if(typeof y>"u"&&(y="default"),b.type=y,"ok"!=y&&"close"!=y&&"cancel"!=y){if("default"!=y&&"destructive"!=y)throw console.error("[Telegram.WebApp] Popup button type is invalid",y),Error("WebAppPopupParamInvalid");var I="";if(typeof d.text<"u"&&(I=a(d.text)),!I.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+y,d.text),Error("WebAppPopupParamInvalid");if(I.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",I),Error("WebAppPopupParamInvalid");b.text=I}f.push(b)}}else f.push({id:"",type:"close"});if(f.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(f.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");l.buttons=f,N={callback:t},u.postEvent("web_app_open_popup",!1,l)},s.showAlert=function(e,t){s.showPopup({message:e},t?function(){t()}:null)},s.showConfirm=function(e,t){s.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(r){t("ok"==r)}:null)},s.showScanQrPopup=function(e,t){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(B)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var r="",o={};if(typeof e.text<"u"){if((r=a(e.text)).length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",r),Error("WebAppScanQrPopupParamInvalid");r.length>0&&(o.text=r)}B={callback:t},u.postEvent("web_app_open_scan_qr_popup",!1,o)},s.closeScanQrPopup=function(){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");B=!1,u.postEvent("web_app_close_scan_qr_popup",!1)},s.readTextFromClipboard=function(e){if(!w("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+h),Error("WebAppMethodUnsupported");var t=function se(e){for(var t="",r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",o=r.length,f=0;f<e;f++)t+=r[Math.floor(Math.random()*o)];return t}(16),r={req_id:t};$[t]={callback:e},u.postEvent("web_app_read_text_from_clipboard",!1,r)},s.ready=function(){u.postEvent("web_app_ready")},s.expand=function(){u.postEvent("web_app_expand")},s.close=function(){u.postEvent("web_app_close")},window.Telegram.WebApp=s,Y(),X(),window.addEventListener("resize",j),M&&document.addEventListener("click",function n(e){if(!e.metaKey&&!e.ctrlKey){for(var t=e.target;"A"!=t.tagName&&t.parentNode;)t=t.parentNode;"A"==t.tagName&&"_blank"!=t.target&&("http:"==t.protocol||"https:"==t.protocol)&&"t.me"==t.hostname&&(s.openTgLink(t.href),e.preventDefault())}}),u.onEvent("theme_changed",function G(e,t){t.theme_params&&(L(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),Y(),p("themeChanged"))}),u.onEvent("viewport_changed",function R(e,t){t.height&&(window.removeEventListener("resize",j),X(t))}),u.onEvent("invoice_closed",function _e(e,t){if(t.slug&&H[t.slug]){var r=H[t.slug];delete H[t.slug],r.callback&&r.callback(t.status),p("invoiceClosed",{url:r.url,status:t.status})}}),u.onEvent("popup_closed",function we(e,t){if(N){var r=N;N=!1;var o=null;typeof t.button_id<"u"&&(o=t.button_id),r.callback&&r.callback(o),p("popupClosed",{button_id:o})}}),u.onEvent("qr_text_received",function ye(e,t){if(B){var o=null;typeof t.data<"u"&&(o=t.data),B.callback&&B.callback(o)&&(B=!1,u.postEvent("web_app_close_scan_qr_popup",!1)),p("qrTextReceived",{data:o})}}),u.onEvent("scan_qr_popup_closed",function Pe(e,t){B=!1}),u.onEvent("clipboard_text_received",function Ae(e,t){if(t.req_id&&$[t.req_id]){var r=$[t.req_id];delete $[t.req_id];var o=null;typeof t.data<"u"&&(o=t.data),r.callback&&r.callback(o),p("clipboardTextReceived",{data:o})}}),u.postEvent("web_app_request_theme"),u.postEvent("web_app_request_viewport")}();